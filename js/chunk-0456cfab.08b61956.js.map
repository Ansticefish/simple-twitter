{"version":3,"sources":["webpack:///./src/apis/admin.js","webpack:///./src/views/AdminSignIn.vue?c016","webpack:///src/views/AdminSignIn.vue","webpack:///./src/views/AdminSignIn.vue?7c05","webpack:///./src/views/AdminSignIn.vue","webpack:///./src/views/AdminSignIn.vue?0152"],"names":["signIn","account","password","apiHelper","post","getPosts","get","deletePost","id","delete","getUsers","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","on","$event","stopPropagation","preventDefault","handleSubmit","apply","arguments","directives","name","rawName","value","expression","class","a","error","domProps","target","composing","_s","warning","p","isProcessing","staticRenderFns","data","mixins","methods","Toast","title","html","adminAPI","localStorage","errorMsg","message","component"],"mappings":"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","file":"js/chunk-0456cfab.08b61956.js","sourcesContent":["import { apiHelper } from '../utils/helpers'\r\n\r\nexport default {\r\n  signIn ( { account, password }) {\r\n    return apiHelper.post('/admin/signin', {\r\n      account,\r\n      password\r\n    })\r\n  },\r\n  getPosts () {\r\n    return apiHelper.get('/admin/tweets')\r\n  },\r\n  deletePost (id) {\r\n    return apiHelper.delete(`/admin/tweets/${id}`)\r\n  },\r\n  getUsers () {\r\n    return apiHelper.get('/admin/users')\r\n  }\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"admin col-lg-4 col-xl-4\"},[_c('img',{staticClass:\"\\n       admin__logo \\n       mt-8\",attrs:{\"src\":require(\"../assets/icons/Icon.png\")}}),_c('h3',{staticClass:\"\\n       admin__header \\n       mt-6\"},[_vm._v(\" 後台登入 \")]),_c('form',{staticClass:\"admin__form\",on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleSubmit.apply(null, arguments)}}},[_c('div',{staticClass:\"\\n         admin__form__wrapper \\n         mt-8\"},[_c('label',{attrs:{\"for\":\"admin__form__wrapper__account\"}},[_vm._v(\" 帳號 \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.account),expression:\"account\"}],class:{'error': _vm.a.error},attrs:{\"type\":\"account\",\"name\":\"account\",\"id\":\"admin__form__wrapper__account\",\"placeholder\":\"請輸入帳號\",\"required\":\"\",\"autofocus\":\"\"},domProps:{\"value\":(_vm.account)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.account=$event.target.value}}}),_c('label',{staticClass:\"error-message\"},[_vm._v(\" \"+_vm._s(_vm.a.warning)+\" \")])]),_c('div',{staticClass:\"\\n          admin__form__wrapper \\n          mt-6\"},[_c('label',{attrs:{\"for\":\"admin__form__wrapper__password\"}},[_vm._v(\" 密碼 \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],class:{'error': _vm.p.error },attrs:{\"type\":\"password\",\"name\":\"password\",\"id\":\"admin__form__wrapper__password\",\"placeholder\":\"請輸入密碼\",\"required\":\"\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}),_c('label',{staticClass:\"error-message\"},[_vm._v(\" \"+_vm._s(_vm.p.warning)+\" \")])]),_c('button',{staticClass:\"admin__form__btn--submit\\n         mt-8\",attrs:{\"disabled\":_vm.isProcessing}},[_vm._v(\" 登入 \")])]),_c('ul',{staticClass:\"admin__ul\\n       mt-4\"},[_c('li',{staticClass:\"admin__ul__li\\n          mr-3\"},[_c('router-link',{attrs:{\"to\":\"/signin\"}},[_vm._v(\" 前台登入 \")])],1)])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <div class=\"row\">\r\n      <div class=\"admin col-lg-4 col-xl-4\">\r\n        <img \r\n         class=\"\r\n         admin__logo \r\n         mt-8\"\r\n         src=\"../assets/icons/Icon.png\"\r\n        >\r\n        <h3 \r\n         class=\"\r\n         admin__header \r\n         mt-6\"\r\n         >\r\n          後台登入\r\n        </h3>\r\n        <form \r\n          @submit.stop.prevent=\"handleSubmit\"\r\n          class=\"admin__form\"\r\n        >\r\n          <div \r\n           class=\"\r\n           admin__form__wrapper \r\n           mt-8\"\r\n          >\r\n            <label for=\"admin__form__wrapper__account\">\r\n            帳號\r\n            </label>\r\n            <input type=\"account\" \r\n            v-model=\"account\"\r\n            :class=\"{'error': a.error}\"\r\n            name=\"account\"\r\n            id=\"admin__form__wrapper__account\" \r\n            placeholder=\"請輸入帳號\" \r\n            required\r\n            autofocus\r\n            >\r\n            <label\r\n             class=\"error-message\"\r\n            >\r\n              {{ a.warning }}\r\n            </label>\r\n          </div> \r\n          <div \r\n            class=\"\r\n            admin__form__wrapper \r\n            mt-6\"\r\n          >\r\n            <label for=\"admin__form__wrapper__password\">\r\n            密碼\r\n            </label>\r\n            <input type=\"password\" \r\n            v-model=\"password\"\r\n            :class=\"{'error': p.error }\"\r\n            name=\"password\"\r\n            id=\"admin__form__wrapper__password\" \r\n            placeholder=\"請輸入密碼\" \r\n            required\r\n            >\r\n            <label\r\n             class=\"error-message\"\r\n            >\r\n              {{ p.warning}}\r\n            </label>\r\n          </div> \r\n          <button   \r\n           class=\"admin__form__btn--submit\r\n           mt-8\"\r\n           :disabled=\"isProcessing\"\r\n          >\r\n            登入\r\n          </button>\r\n        </form>\r\n        <ul \r\n         class=\"admin__ul\r\n         mt-4\"\r\n         >\r\n            <li \r\n            class=\"admin__ul__li\r\n            mr-3\"\r\n            >\r\n              <router-link to=\"/signin\">\r\n                前台登入\r\n              </router-link>\r\n            </li>\r\n          </ul>\r\n      </div> \r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast, ToastIcon } from '../utils/helpers'\r\nimport { preventInputBlank } from '../utils/mixins'\r\nimport adminAPI from '../apis/admin'\r\n\r\nexport default {\r\n  name: 'AdminSignIn',\r\n  data () {\r\n    return {\r\n      account: '',\r\n      password: '',\r\n      a: {\r\n        error: false,\r\n        warning: ''\r\n      },\r\n      p: {\r\n        error: false,\r\n        warning: ''\r\n      },\r\n      isProcessing: false\r\n    }\r\n  },\r\n  mixins: [preventInputBlank],\r\n  methods: {\r\n    async handleSubmit () {\r\n      try {\r\n        this.isProcessing = true \r\n        // avoid empty data\r\n        if (!this.account.trim() || !this.password.trim()){\r\n          Toast.fire({\r\n            title: '帳號、密碼不可空白',\r\n            html: ToastIcon.redCrossHtml\r\n          })\r\n          this.isProcessing = false\r\n          return\r\n        }\r\n\r\n        // add API \r\n        const { data } = await adminAPI.signIn({\r\n          account: this.account,\r\n          password: this.password\r\n        })\r\n\r\n        localStorage.setItem('token', data.token)\r\n        Toast.fire({\r\n          title: '登入成功',\r\n          html: ToastIcon.greenCheckHtml\r\n        })\r\n        this.$store.commit('setCurrentUser', data.user)\r\n        this.$router.push('/admin/posts')\r\n\r\n      } catch (error) {\r\n        this.isProcessing = false\r\n        const errorMsg = error.response.data.message\r\n        if( errorMsg === 'Error:只有管理者帳號可以登入後台！' || \r\n          errorMsg === 'Error:帳號不存在！'\r\n        ) {\r\n          this.a.error = true\r\n          this.a.warning = '帳號不存在！'\r\n          return\r\n        } else if (errorMsg) {\r\n          const message = errorMsg.slice(6)\r\n          Toast.fire({\r\n            title: `${message}`,\r\n            html: ToastIcon.redCrossHtml\r\n          })\r\n        } else {\r\n          Toast.fire({\r\n            title: '登入失敗',\r\n            html: ToastIcon.redCrossHtml\r\n          })\r\n        }\r\n          this.password = ''\r\n      }   \r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../assets/scss/signIn.scss';\r\n.admin {\r\n  @extend %signin;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminSignIn.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminSignIn.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminSignIn.vue?vue&type=template&id=0f8c810a&scoped=true&\"\nimport script from \"./AdminSignIn.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminSignIn.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminSignIn.vue?vue&type=style&index=0&id=0f8c810a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f8c810a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminSignIn.vue?vue&type=style&index=0&id=0f8c810a&lang=scss&scoped=true&\""],"sourceRoot":""}