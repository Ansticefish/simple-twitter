(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46098578"],{1276:function(e,t,s){"use strict";var r=s("2ba4"),n=s("c65b"),a=s("e330"),i=s("d784"),o=s("44e7"),l=s("825a"),c=s("1d80"),p=s("4840"),u=s("8aa5"),_=s("50c4"),d=s("577e"),m=s("dc4a"),f=s("4dae"),v=s("14c3"),h=s("9263"),g=s("9f7f"),y=s("d039"),C=g.UNSUPPORTED_Y,b=4294967295,w=Math.min,k=[].push,x=a(/./.exec),P=a(k),R=a("".slice),U=!y((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var s="ab".split(e);return 2!==s.length||"a"!==s[0]||"b"!==s[1]}));i("split",(function(e,t,s){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,s){var a=d(c(this)),i=void 0===s?b:s>>>0;if(0===i)return[];if(void 0===e)return[a];if(!o(e))return n(t,a,e,i);var l,p,u,_=[],m=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,g=new RegExp(e.source,m+"g");while(l=n(h,g,a)){if(p=g.lastIndex,p>v&&(P(_,R(a,v,l.index)),l.length>1&&l.index<a.length&&r(k,_,f(l,1)),u=l[0].length,v=p,_.length>=i))break;g.lastIndex===l.index&&g.lastIndex++}return v===a.length?!u&&x(g,"")||P(_,""):P(_,R(a,v)),_.length>i?f(_,0,i):_}:"0".split(void 0,0).length?function(e,s){return void 0===e&&0===s?[]:n(t,this,e,s)}:t,[function(t,s){var r=c(this),i=void 0==t?void 0:m(t,e);return i?n(i,t,r,s):n(a,d(r),t,s)},function(e,r){var n=l(this),i=d(e),o=s(a,n,i,r,a!==t);if(o.done)return o.value;var c=p(n,RegExp),m=n.unicode,f=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(C?"g":"y"),h=new c(C?"^(?:"+n.source+")":n,f),g=void 0===r?b:r>>>0;if(0===g)return[];if(0===i.length)return null===v(h,i)?[i]:[];var y=0,k=0,x=[];while(k<i.length){h.lastIndex=C?0:k;var U,O=v(h,C?R(i,k):i);if(null===O||(U=w(_(h.lastIndex+(C?k:0)),i.length))===y)k=u(i,k,m);else{if(P(x,R(i,y,k)),x.length===g)return x;for(var j=1;j<=O.length-1;j++)if(P(x,O[j]),x.length===g)return x;k=y=U}}return P(x,R(i,y)),x}]}),!U,C)},"14c3":function(e,t,s){var r=s("da84"),n=s("c65b"),a=s("825a"),i=s("1626"),o=s("c6b6"),l=s("9263"),c=r.TypeError;e.exports=function(e,t){var s=e.exec;if(i(s)){var r=n(s,e,t);return null!==r&&a(r),r}if("RegExp"===o(e))return n(l,e,t);throw c("RegExp#exec called on incompatible receiver")}},"1c79":function(e,t,s){},4522:function(e,t,s){},"55a5":function(e,t,s){"use strict";s("5f44")},"5f44":function(e,t,s){},"61ed":function(e,t,s){"use strict";s("4522")},"75b4":function(e,t,s){"use strict";s("bdb4")},"8aa5":function(e,t,s){"use strict";var r=s("6547").charAt;e.exports=function(e,t,s){return t+(s?r(e,t).length:1)}},a327:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal"},[r("div",{staticClass:"modal__header modal-header"},[r("img",{staticClass:"modal__header__btn--close\n     ml-3",attrs:{src:s("6f32")},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.closeModal.apply(null,arguments)}}})]),r("div",{staticClass:"modal__post"},[r("img",{staticClass:"modal__post__avatar",attrs:{src:e._f("emptyAvatar")(e.post.TweetUser.avatar),alt:"avatar"}}),r("div",{staticClass:"modal__post__content mr-3"},[r("div",{staticClass:"modal__post__content__header"},[r("p",[e._v(" "+e._s(e.post.TweetUser.name)+" ")]),r("p",{staticClass:"ml-2"},[e._v(" "+e._s(e._f("accountShow")(e.post.TweetUser.account))+" ")]),r("div",{staticClass:"ml-2"}),r("p",{staticClass:"ml-2"},[e._v(" "+e._s(e._f("fromNow")(e.post.createdAt))+" ")])]),r("p",{staticClass:"modal__post__content__body"},[e._v(" "+e._s(e.post.description)+" ")])]),r("div",{staticClass:"modal__post__footer"},[r("p",[e._v(" 回覆給 ")]),r("p",{staticClass:"ml-1"},[e._v(" "+e._s(e._f("accountShow")(e.post.TweetUser.account))+" ")])])]),r("form",{staticClass:"modal__reply",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.createReply(e.post.id)}}},[r("img",{staticClass:"modal__reply__avatar",attrs:{src:e._f("emptyAvatar")(e.currentUser.avatar),alt:"avatar"}}),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.replyContent,expression:"replyContent"}],staticClass:"modal__reply__textarea mr-3",attrs:{placeholder:"推你的回覆"},domProps:{value:e.replyContent},on:{input:function(t){t.target.composing||(e.replyContent=t.target.value)}}}),r("div",{staticClass:"modal__reply__wrapper modal-footer mb-4"},[r("p",{staticClass:"modal__reply__wrapper__warning \n        warning\n        mr-3"},[e._v(" "+e._s(e.warning)+" ")]),r("button",{staticClass:"modal__reply__wrapper__btn--submit mr-2",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" 回覆 ")])])])])},n=[],a=s("1da1"),i=(s("96cf"),s("498a"),s("fb6a"),s("2708")),o=s("2fa3"),l=s("684b"),c={name:"CreateReplyModal",props:{post:{type:Object,required:!0},currentUser:{type:Object,required:!0}},mixins:[i["b"],i["a"],i["d"]],data:function(){return{replyContent:"",warning:"",isProcessing:!0}},methods:{closeModal:function(){this.replyContent="",this.$emit("closeReplyModal")},createReply:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.isProcessing=!0,e.replyContent.trim()){t.next=6;break}return e.warning="內容不可空白",e.isProcessing=!1,t.abrupt("return");case 6:return t.next=8,l["a"].createReply({postId:e.post.id,comment:e.replyContent});case 8:e.$emit("add-reply",e.post.id),e.replyContent="",e.closeModal(),o["a"].fire({title:"已成功回覆貼文",html:o["b"].greenCheckHtml}),t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](0),e.isProcessing=!1,s=t.t0.response.data.message,"Error:回覆不可超過140字！"===s?e.warning="字數不可超過140字":"Error:回覆內容不可空白！"===s?e.warning="內容不可空白":(r=s.slice(6),o["a"].fire({title:"".concat(r),html:o["b"].redCrossHtml}));case 19:case"end":return t.stop()}}),t,null,[[0,14]])})))()}},watch:{replyContent:{handler:function(){this.replyContent.trim().length>0&&this.replyContent.length<141?(this.warning="",this.isProcessing=!1):this.replyContent.length>140?(this.warning="字數不可超過140字",this.isProcessing=!0):(this.warning="內容不可空白",this.isProcessing=!0)}}}},p=c,u=(s("55a5"),s("2877")),_=Object(u["a"])(p,r,n,!1,null,"0b806048",null);t["a"]=_.exports},bdb4:function(e,t,s){},caeb:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("Spinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-2 col-xl-2"},[s("SideBar")],1),s("div",{staticClass:"main col-lg-7 col-xl-7"},[s("SinglePostheader"),s("PostBlockFull",{attrs:{post:e.post},on:{replyPost:e.openReplyModal,likePost:e.likePost,unlikePost:e.unlikePost}}),s("ReplyBlock",{attrs:{replies:e.replies}})],1),s("div",{staticClass:"col-lg-3 col-xl-3"},[s("PopularUsers")],1),e.openReply?s("div",{staticClass:"modal-backdrop"},[s("CreateReplyModal",{attrs:{post:e.post,currentUser:e.currentUser},on:{closeReplyModal:e.closeReplyModal,"add-reply":e.addReply}})],1):e._e()])],1)},n=[],a=s("5530"),i=s("2909"),o=s("1da1"),l=(s("96cf"),s("a4d3"),s("e01a"),s("7c08")),c=s("f963"),p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"post-header"}},[s("div",{staticClass:"back-btn",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.backToHome.apply(null,arguments)}}},[s("div",{staticClass:"back-btn__icon"}),s("h5",{staticClass:"back-btn__descript__name"},[e._v("推文")])])])},u=[],_={name:"PersonalPageHeader",data:function(){return{tweetsAmount:25}},methods:{backToHome:function(){this.$router.push("/home")}}},d=_,m=(s("75b4"),s("2877")),f=Object(m["a"])(d,p,u,!1,null,"114b4a9a",null),v=f.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"post-full"},[s("div",{staticClass:"post p-3"},[s("div",{staticClass:"post__main pb-2"},[s("div",{staticClass:"post__main__info"},[s("img",{staticClass:"post__main__info__avatar mr-2",attrs:{src:e._f("emptyAvatar")(e.post.TweetUser.avatar),alt:""},on:{click:function(t){return e.getIntoPersonalPage(e.post.TweetUser.id)}}}),s("div",{staticClass:"post__main__info__creater"},[s("p",{staticClass:"post__main__info__creater__name",on:{click:function(t){return e.getIntoPersonalPage(e.post.TweetUser.id)}}},[e._v(" "+e._s(e.post.TweetUser.name)+" ")]),s("p",{staticClass:"post__main__info__creater__account"},[e._v(" "+e._s(e._f("accountShow")(e.post.TweetUser.account))+" ")])])]),s("div",{staticClass:"post__main__description my-2"},[e._v(e._s(e.post.description))]),s("div",{staticClass:"post__main__created-time"},[e._v(" "+e._s(e._f("showDate")(e.post.createdAt))+" ")])]),s("div",{staticClass:"post__footer py-3"},[s("p",{staticClass:"post__footer__comment-count mr-5"},[s("span",[e._v(e._s(e.post.replyCount))]),e._v(" 回覆 ")]),s("p",{staticClass:"post__footer__like-count"},[s("span",[e._v(e._s(e.post.likeCount))]),e._v(" 喜歡次數 ")])]),s("div",{staticClass:"post__response pt-3 my-1"},[s("div",{staticClass:"post__response__comment",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.reply.apply(null,arguments)}}}),e.post.isLiked?s("div",{staticClass:"post__response__like active",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.unlike.apply(null,arguments)}}}):s("div",{staticClass:"post__response__like",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.like.apply(null,arguments)}}})])])])},g=[],y=(s("ac1f"),s("1276"),s("c1df")),C=s.n(y),b=s("684b"),w=s("2fa3"),k=s("2708"),x={name:"PostBlockFull",mixins:[k["a"],k["b"]],props:{post:{type:Object,required:!0}},methods:{reply:function(){this.$emit("replyPost")},like:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b["a"].likePost(e.post.id);case 3:e.$emit("likePost"),t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),s=t.t0.response.data.message.split(":"),w["a"].fire({title:s[1],html:w["b"].redCrossHtml});case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},unlike:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b["a"].unlikePost(e.post.id);case 3:e.$emit("unlikePost"),t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),s=t.t0.response.data.message.split(":"),w["a"].fire({title:s[1],html:w["b"].redCrossHtml});case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},getIntoPersonalPage:function(e){this.$route.params.id!==e&&this.$router.push({name:"personal-page-root",params:{id:e}})}},filters:{showDate:function(e){return C.a.updateLocale("zh-tw",{monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,longDateFormat:{lll:"A h:mm・YYYY年MMMD日"},meridiemHour:function(e,t){var s=e;return 12===s&&(s=0),"凌晨"===t||"早上"===t||"上午"===t?s:"下午"===t||"晚上"===t?s+12:s>=11?s:s+12},meridiem:function(e,t){var s=100*e+t;return s<600?"凌晨":s<900?"早上":s<1130?"上午":s<1230?"中午":s<1800?"下午":"晚上"}}),e?C()(e).format("lll"):"--"}}},P=x,R=(s("d48e"),Object(m["a"])(P,h,g,!1,null,"b2354cce",null)),U=R.exports,O=s("ee96"),j=s("a327"),T=s("2375"),E=s("2f62"),M={name:"SinglePost",components:{Spinner:T["a"],SideBar:l["a"],PopularUsers:c["a"],SinglePostheader:v,PostBlockFull:U,ReplyBlock:O["a"],CreateReplyModal:j["a"]},data:function(){return{post:{id:-1,description:"",UserId:-1,replyCount:0,likeCount:0,createdAt:"",updatedAt:"",TweetUser:{id:-1,account:"",name:"",avatar:""},isLiked:!1},replies:[],openReply:!1,isLoading:!1}},methods:{fetchPost:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var r,n,a,i,o,l,c,p,u,_;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,b["a"].getPost(e);case 3:r=s.sent,n=r.data,a=n.id,i=n.description,o=n.UserId,l=n.replyCount,c=n.likeCount,p=n.createdAt,u=n.TweetUser,_=n.isLiked,t.post={id:a,description:i,UserId:o,replyCount:l,likeCount:c,createdAt:p,TweetUser:u,isLiked:_},s.next=13;break;case 9:s.prev=9,s.t0=s["catch"](0),console.log(s.t0.message),w["a"].fire({title:"無法取得貼文資料",html:w["b"].redCrossHtml});case 13:case"end":return s.stop()}}),s,null,[[0,9]])})))()},fetchReplies:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,b["a"].getPostReplies(e);case 3:r=s.sent,n=r.data,n.message||(t.replies=Object(i["a"])(n)),s.next=12;break;case 8:s.prev=8,s.t0=s["catch"](0),console.log(s.t0.message),w["a"].fire({title:"無法取得回覆資料",html:w["b"].redCrossHtml});case 12:case"end":return s.stop()}}),s,null,[[0,8]])})))()},likePost:function(){this.post.isLiked=!0,this.fetchPost(this.post.id)},unlikePost:function(){this.post.isLiked=!1,this.fetchPost(this.post.id)},openReplyModal:function(){this.openReply=!0},closeReplyModal:function(){this.openReply=!1},addReply:function(){this.post.replyCount++,this.fetchReplies(this.post.id)}},computed:Object(a["a"])({},Object(E["b"])(["currentUser"])),created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,s=e.$route.params.id,t.next=4,e.fetchPost(s);case 4:return t.next=6,e.fetchReplies(s);case 6:e.isLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},beforeRouteUpdate:function(e,t,s){var r=e.params.id;this.fetchPost(r),this.fetchReplies(r),s()}},$=M,A=(s("61ed"),Object(m["a"])($,r,n,!1,null,"adda2a28",null));t["default"]=A.exports},d48e:function(e,t,s){"use strict";s("1c79")},d784:function(e,t,s){"use strict";s("ac1f");var r=s("e330"),n=s("cb2d"),a=s("9263"),i=s("d039"),o=s("b622"),l=s("9112"),c=o("species"),p=RegExp.prototype;e.exports=function(e,t,s,u){var _=o(e),d=!i((function(){var t={};return t[_]=function(){return 7},7!=""[e](t)})),m=d&&!i((function(){var t=!1,s=/a/;return"split"===e&&(s={},s.constructor={},s.constructor[c]=function(){return s},s.flags="",s[_]=/./[_]),s.exec=function(){return t=!0,null},s[_](""),!t}));if(!d||!m||s){var f=r(/./[_]),v=t(_,""[e],(function(e,t,s,n,i){var o=r(e),l=t.exec;return l===a||l===p.exec?d&&!i?{done:!0,value:f(t,s,n)}:{done:!0,value:o(s,t,n)}:{done:!1}}));n(String.prototype,e,v[0]),n(p,_,v[1])}u&&l(p[_],"sham",!0)}},d98f:function(e,t,s){"use strict";s("f632")},ee96:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"reply-block"}},e._l(e.replies,(function(t){return s("div",{key:t.id,staticClass:"reply py-3 px-4"},[s("img",{staticClass:"reply__avatar mr-2",attrs:{src:e._f("emptyAvatar")(t.ReplyUser.avatar),alt:""},on:{click:function(s){return e.getIntoPersonalPage(t.ReplyUser.id,t.ReplyUser.namet)}}}),s("div",{staticClass:"text-wrapper"},[s("div",{staticClass:"reply__replier mb-2"},[s("span",{staticClass:"reply__replier__name mr-2",on:{click:function(s){return e.getIntoPersonalPage(t.ReplyUser.id,t.ReplyUser.name)}}},[e._v(e._s(t.ReplyUser.name))]),s("span",{staticClass:"reply__replier__account-time"},[e._v(e._s(e._f("accountShow")(t.ReplyUser.account))+"・"+e._s(e._f("fromNow")(t.createdAt)))])]),s("p",{staticClass:"reply__creater mb-2",on:{click:function(s){return e.getIntoPersonalPage(t.TweetUser.id,t.TweetUser.name)}}},[e._v(" 回覆 "),s("span",[e._v(e._s(e._f("accountShow")(t.TweetUser.account)))])]),s("p",{staticClass:"reply__content"},[e._v(" "+e._s(t.comment)+" ")]),t.ReplyUser.id!==e.currentUser.id?s("div",{staticClass:"reply__response mt-2"},[e._m(0,!0),e._m(1,!0)]):e._e()])])})),0)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reply__response__reply mr-8"},[s("div",{staticClass:"reply__response__reply__icon"}),s("span",{staticClass:"reply__response__reply__num"},[e._v("25")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reply__response__like"},[s("div",{staticClass:"reply__response__like__icon"}),s("span",{staticClass:"reply__response__like__num"},[e._v("25")])])}],a=s("5530"),i=s("2708"),o=s("2f62"),l={name:"ReplyBlock",mixins:[i["a"],i["b"],i["d"],i["e"]],props:{replies:{type:Array,required:!0}},computed:Object(a["a"])({},Object(o["b"])(["currentUser"]))},c=l,p=(s("d98f"),s("2877")),u=Object(p["a"])(c,r,n,!1,null,"1a429218",null);t["a"]=u.exports},f632:function(e,t,s){}}]);
//# sourceMappingURL=chunk-46098578.b83341ba.js.map