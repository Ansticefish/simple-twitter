{"version":3,"sources":["webpack:///./src/components/AdminPostList.vue?6e02","webpack:///./src/components/AdminPostList.vue?53d9","webpack:///src/components/AdminPostList.vue","webpack:///./src/components/AdminPostList.vue?d0c6","webpack:///./src/components/AdminPostList.vue","webpack:///./src/apis/admin.js","webpack:///./src/assets/icons/cross-admin.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_l","post","key","id","attrs","_f","TweetUser","avatar","_v","_s","name","account","createdAt","description","length","_e","on","$event","stopPropagation","preventDefault","deletePost","staticRenderFns","data","posts","mixins","methods","fetchPosts","adminAPI","errorMsg","message","Toast","title","html","created","filters","filterContent","content","component","signIn","password","apiHelper","getPosts","get","delete","getUsers","module","exports"],"mappings":"kHAAA,W,yCCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,aAAa,CAACN,EAAIO,GAAG,GAAGP,EAAIQ,GAAIR,EAAS,OAAE,SAASS,GAAM,OAAOL,EAAG,MAAM,CAACM,IAAID,EAAKE,GAAGL,YAAY,mBAAmB,CAACF,EAAG,MAAM,CAACE,YAAY,0BAA0BM,MAAM,CAAC,IAAMZ,EAAIa,GAAG,cAAPb,CAAsBS,EAAKK,UAAUC,QAAQ,IAAM,YAAYX,EAAG,MAAM,CAACE,YAAY,4BAA4B,CAACF,EAAG,MAAM,CAACE,YAAY,oCAAoC,CAACF,EAAG,IAAI,CAACE,YAAY,QAAQ,CAACN,EAAIgB,GAAG,IAAIhB,EAAIiB,GAAGR,EAAKK,UAAUI,MAAM,OAAOd,EAAG,IAAI,CAACE,YAAY,QAAQ,CAACN,EAAIgB,GAAG,IAAIhB,EAAIiB,GAAGjB,EAAIa,GAAG,cAAPb,CAAsBS,EAAKK,UAAUK,UAAU,OAAOf,EAAG,MAAM,CAACE,YAAY,SAASF,EAAG,IAAI,CAACE,YAAY,QAAQ,CAACN,EAAIgB,GAAG,IAAIhB,EAAIiB,GAAGjB,EAAIa,GAAG,UAAPb,CAAkBS,EAAKW,YAAY,SAAShB,EAAG,IAAI,CAACE,YAAY,kCAAkC,CAACN,EAAIgB,GAAG,IAAIhB,EAAIiB,GAAGjB,EAAIa,GAAG,gBAAPb,CAAwBS,EAAKY,cAAc,KAAMZ,EAAKY,YAAYC,QAAU,GAAIlB,EAAG,OAAO,CAACJ,EAAIgB,GAAG,WAAWhB,EAAIuB,SAASnB,EAAG,MAAM,CAACE,YAAY,+BAA+BM,MAAM,CAAC,IAAM,EAAQ,QAAmC,IAAM,UAAUY,GAAG,CAAC,MAAQ,SAASC,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwB3B,EAAI4B,WAAWnB,EAAKE,cAAa,IACnrCkB,EAAkB,CAAC,WAAa,IAAI7B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,KAAK,CAACJ,EAAIgB,GAAG,c,0FCoDvJ,GACfE,qBACAY,KAFA,WAGA,OACAC,WAGAC,8BACAC,SACAC,WADA,WACA,6LAEAC,kBAFA,gBAEAL,EAFA,EAEAA,KACA,UAHA,mDAKAM,EAAA,2BACA,IACAC,EAAAD,WACAE,aACAC,mBACAC,4BAVA,4DAeAZ,WAhBA,SAgBAjB,GAAA,yLAEAwB,qBAFA,OAIA,2CACA1B,YAGA6B,aACAC,eACAC,6BAVA,mDAaAJ,EAAA,2BACA,GACAC,EAAAD,WACAE,aACAC,mBACAC,4BAGAF,aACAC,eACAC,2BAvBA,6DA6BAC,QArDA,WAsDA,mBAEAC,SACAC,cADA,SACAC,GACA,wBC/GuV,I,wBCQnVC,EAAY,eACd,EACA9C,EACA8B,GACA,EACA,KACA,WACA,MAIa,aAAAgB,E,2CCnBf,gBAEe,QACbC,OADa,YACmB,IAArB3B,EAAqB,EAArBA,QAAS4B,EAAY,EAAZA,SAClB,OAAOC,OAAUvC,KAAK,gBAAiB,CACrCU,UACA4B,cAGJE,SAPa,WAQX,OAAOD,OAAUE,IAAI,kBAEvBtB,WAVa,SAUDjB,GACV,OAAOqC,OAAUG,OAAV,wBAAkCxC,KAE3CyC,SAba,WAcX,OAAOJ,OAAUE,IAAI,mB,mBChBzBG,EAAOC,QAAU,smB","file":"js/chunk-bfd7d6cc.2c0c1709.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminPostList.vue?vue&type=style&index=0&id=5e1804c2&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"adminPost\"},[_vm._m(0),_vm._l((_vm.posts),function(post){return _c('div',{key:post.id,staticClass:\"adminPost__post\"},[_c('img',{staticClass:\"adminPost__post__avatar\",attrs:{\"src\":_vm._f(\"emptyAvatar\")(post.TweetUser.avatar),\"alt\":\"avatar\"}}),_c('div',{staticClass:\"adminPost__post__content\"},[_c('div',{staticClass:\"adminPost__post__content__header\"},[_c('p',{staticClass:\"name\"},[_vm._v(\" \"+_vm._s(post.TweetUser.name)+\" \")]),_c('p',{staticClass:\"ml-2\"},[_vm._v(\" \"+_vm._s(_vm._f(\"accountShow\")(post.TweetUser.account))+\" \")]),_c('div',{staticClass:\"ml-2\"}),_c('p',{staticClass:\"ml-2\"},[_vm._v(\" \"+_vm._s(_vm._f(\"fromNow\")(post.createdAt))+\" \")])]),_c('p',{staticClass:\"adminPost__post__content__body\"},[_vm._v(\" \"+_vm._s(_vm._f(\"filterContent\")(post.description))+\" \"),(post.description.length >= 50)?_c('span',[_vm._v(\" ... \")]):_vm._e()])]),_c('img',{staticClass:\"adminPost__post__btn--delete\",attrs:{\"src\":require(\"../assets/icons/cross-admin.png\"),\"alt\":\"delete\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deletePost(post.id)}}})])})],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"adminPost__header\"},[_c('h4',[_vm._v(\"推文清單\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"adminPost\">\r\n    <div class=\"adminPost__header\">\r\n      <h4>推文清單</h4>\r\n    </div>\r\n    <!-- render posts -->\r\n    <div \r\n      v-for=\"post in posts\"\r\n      :key=\"post.id\"\r\n      class=\"adminPost__post\">\r\n      <img \r\n        :src=\"post.TweetUser.avatar | emptyAvatar\" \r\n        alt=\"avatar\"\r\n        class=\"adminPost__post__avatar\"\r\n      >\r\n      <div class=\"adminPost__post__content\">\r\n        <div class=\"adminPost__post__content__header\">\r\n          <p \r\n           class=\"name\"\r\n          >\r\n            {{ post.TweetUser.name}}\r\n          </p>\r\n          <p class=\"ml-2\">\r\n            {{ post.TweetUser.account | accountShow }}\r\n          </p> \r\n          <div class=\"ml-2\">\r\n          </div>\r\n          <p class=\"ml-2\">\r\n           {{ post.createdAt | fromNow }}\r\n          </p>\r\n        </div>\r\n        <p \r\n         class=\"adminPost__post__content__body\">\r\n          {{ post.description | filterContent }} \r\n          <span v-if=\"post.description.length >= 50\">\r\n            ...\r\n          </span>\r\n        </p>\r\n      </div>\r\n       <img\r\n          @click.stop.prevent=\"deletePost(post.id)\"\r\n          class=\"adminPost__post__btn--delete\"\r\n          src=\"../assets/icons/cross-admin.png\" alt=\"delete\"\r\n       >\r\n   </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { accountShow, emptyAvatar, fromNow } from \"../utils/mixins\"\r\nimport adminAPI from '../apis/admin'\r\nimport { Toast, ToastIcon } from '../utils/helpers'\r\n\r\nexport default {\r\n  name: 'AdminPostList',\r\n  data () {\r\n    return {\r\n      posts: []\r\n    }\r\n  },\r\n  mixins: [ accountShow, emptyAvatar, fromNow ],\r\n  methods: {\r\n    async fetchPosts () {\r\n      try {\r\n        const { data } = await adminAPI.getPosts()\r\n        this.posts = data\r\n      } catch (error) {\r\n        const errorMsg = error.response.data.message\r\n        if( errorMsg ) {\r\n          const message = errorMsg.slice(6)\r\n          Toast.fire({\r\n            title: `${message}`,\r\n            html: ToastIcon.redCrossHtml\r\n          })\r\n        }\r\n      }\r\n    },\r\n    async deletePost( id ) {\r\n      try {\r\n        await adminAPI.deletePost(id)\r\n\r\n        this.posts = this.posts.filter( post => \r\n          post.id !== id\r\n        )\r\n\r\n        Toast.fire({\r\n          title: '推文刪除成功',\r\n          html: ToastIcon.greenCheckHtml\r\n        })\r\n      } catch (error) {\r\n        const errorMsg = error.response.data.message\r\n        if( errorMsg ) {\r\n          const message = errorMsg.slice(6)\r\n          Toast.fire({\r\n            title: `${message}`,\r\n            html: ToastIcon.redCrossHtml\r\n          })\r\n        } else {\r\n          Toast.fire({\r\n            title: '推文刪除失敗',\r\n            html: ToastIcon.redCrossHtml\r\n          })\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.fetchPosts()\r\n  },\r\n  filters: {\r\n    filterContent ( content ) {\r\n      return content.slice(0, 51) \r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../assets/scss/modal.scss';\r\n@import '../assets/scss/post.scss';\r\n.adminPost {\r\n  &__header {\r\n    @extend %header_;\r\n  }\r\n  &__post {\r\n    @extend %post;\r\n    height: 118px;\r\n    &__avatar {\r\n      @extend %avatar;\r\n      &:hover {\r\n        cursor: default;\r\n      } \r\n    }\r\n    &__content {\r\n      width: 90%;\r\n      padding: 28px 5px;\r\n      &__header {\r\n        @extend %post-header-font;\r\n        display: flex;\r\n        align-items: center;\r\n        & .name {\r\n          @extend %name_;\r\n          &:hover {\r\n            cursor: default;\r\n            text-decoration: none;\r\n          }   \r\n        }\r\n      }\r\n      &__body {\r\n        @extend %body;\r\n        span {\r\n          @extend %description-font;\r\n        }\r\n      }\r\n    }\r\n     &__btn--delete {\r\n      position: absolute;\r\n      top: 10px;\r\n      right: 10px;\r\n      width: 15px;\r\n      height: 15px;\r\n      &:hover {\r\n        opacity: 0.6;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }  \r\n}\r\n\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminPostList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminPostList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminPostList.vue?vue&type=template&id=5e1804c2&scoped=true&\"\nimport script from \"./AdminPostList.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminPostList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminPostList.vue?vue&type=style&index=0&id=5e1804c2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5e1804c2\",\n  null\n  \n)\n\nexport default component.exports","import { apiHelper } from '../utils/helpers'\r\n\r\nexport default {\r\n  signIn ( { account, password }) {\r\n    return apiHelper.post('/admin/signin', {\r\n      account,\r\n      password\r\n    })\r\n  },\r\n  getPosts () {\r\n    return apiHelper.get('/admin/tweets')\r\n  },\r\n  deletePost (id) {\r\n    return apiHelper.delete(`/admin/tweets/${id}`)\r\n  },\r\n  getUsers () {\r\n    return apiHelper.get('/admin/users')\r\n  }\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFMSURBVHgBxdfNTcMwFAfw9/wW6AgMUamwRTeg3Cr1BCzQBUBcKvVGmKaH9gAbwAZM4EdeaSo3TWw/51X9H5z4Q/kpUezEAFcKSrFYPN97j2919dc5v1ytXj7gAjlxpMF7t6wPIwC+qTsqGQDGOaBV47j/Zj8KB1njAXrMHmbmx/ZgK7wLlZAUu93mczy+/UHEadjJjNPJ5O57u918gSHK7B+oqVjjMXS9fq0obLTCU6icU7tzKJ6DdsJD8Fy0Fy7BNWgU1uBaVIKQkfn8aYbo3tvtzvFMjlo0G47hXUmhkuijDtP32EtQFZyD56ISB8oQIZf0nY0FRfre3iaaFS4bTqFaPOutjs3T/UV6plrsTyZ5x6nFoXR5pSFoUy/BaShaipMFWoKTFarFyRLV4GiNhol91fBSaBKX4rCTMEclco1moTmD2zsJKzSG/wEnWs/tRpQKvQAAAABJRU5ErkJggg==\""],"sourceRoot":""}